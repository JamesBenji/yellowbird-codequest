"use strict";(self["webpackChunkcodequest"]=self["webpackChunkcodequest"]||[]).push([[637],{9637:function(e,s,t){t.r(s),t.d(s,{default:function(){return J}});var l=t(6768),a=t(144),r=t(4232),o=t(5130),i=t(6242),n=t(5365),d=t(657),u=t(7617),c=t(7326),p=t(6380);const f=(0,u.aU)(c.x),m=(0,d.nY)("user",{state:()=>({profile:null}),actions:{async fetchUserProfile(){const e=(0,p.A)();if(!e.user)return;const s=(0,u.H9)(f,"Users",e.user.uid),t=await(0,u.x7)(s);t.exists()&&(this.profile=t.data())},async updateUserProfile(e){const s=(0,p.A)();if(!s.user||!this.profile)return;const t=(0,u.H9)(f,"Users",s.user.uid);await(0,u.mZ)(t,e),this.profile={...this.profile,...e}}}});var b=m;const y={class:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8"},x={class:"max-w-4xl mx-auto"},g={key:0,class:"bg-white rounded-xl shadow-sm p-6 mb-8"},k={class:"space-y-4"},v={key:0,class:"font-semibold text-xl"},h={class:"text-gray-900"},w={for:"firstName",class:"block text-sm font-medium text-gray-700 mb-1"},L={for:"lastName",class:"block text-sm font-medium text-gray-700 mb-1"},C={for:"newAddress",class:"block text-sm font-medium text-gray-700 mb-1"},N=["disabled"],U={key:0},E={key:1,class:"flex items-center justify-center gap-2"},R={key:1},X={key:0,class:"bg-white rounded-xl shadow-sm p-6 text-center"},A={key:1,class:"space-y-4"},P={class:"flex justify-between items-center"},_={class:"text-lg font-semibold text-gray-800"},H={class:"text-gray-600 mt-2"},V={class:"font-bold"};var W={__name:"ProfilePage",setup(e){const s=b(),t=(0,i.A)(),d=(0,a.KR)(""),u=(0,a.KR)(""),c=(0,a.KR)(""),p=(0,n.A)();(0,l.sV)((async()=>{p.addNotification("Loading...","success"),await s.fetchUserProfile(),d.value=s.profile.firstName,u.value=s.profile.lastName,c.value=s.profile.address}));const f=async()=>{await s.updateUserProfile({firstName:d.value,lastName:u.value,address:c.value})};return(e,i)=>((0,l.uX)(),(0,l.CE)("div",y,[(0,l.Lk)("div",x,[i[10]||(i[10]=(0,l.Lk)("div",{class:"mb-8"},[(0,l.Lk)("h1",{class:"text-3xl font-bold text-gray-800"},"My Profile"),(0,l.Lk)("p",{class:"text-gray-500 mt-2"},"Manage your personal information and view your order history.")],-1)),(0,a.R1)(s).profile?((0,l.uX)(),(0,l.CE)("div",g,[(0,l.Lk)("div",k,[(0,a.R1)(s).profile?((0,l.uX)(),(0,l.CE)("h2",v,"Hello "+(0,r.v_)((0,a.R1)(s).profile.firstName)+" "+(0,r.v_)((0,a.R1)(s).profile.lastName)+" ðŸ‘‹",1)):(0,l.Q3)("",!0),(0,l.Lk)("div",null,[(0,l.Lk)("p",h,"ðŸ“¬ "+(0,r.v_)((0,a.R1)(s).profile.email),1)]),(0,l.Lk)("div",null,[(0,l.Lk)("label",w,[i[3]||(i[3]=(0,l.eW)("First Name ")),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":i[0]||(i[0]=e=>d.value=e),id:"firstName",type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",placeholder:"Enter your first name"},null,512),[[o.Jo,d.value]])])]),(0,l.Lk)("div",null,[(0,l.Lk)("label",L,[i[4]||(i[4]=(0,l.eW)("Last Name ")),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":i[1]||(i[1]=e=>u.value=e),id:"lastName",type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",placeholder:"Enter your last name"},null,512),[[o.Jo,u.value]])])]),(0,l.Lk)("div",null,[(0,l.Lk)("label",C,[i[5]||(i[5]=(0,l.eW)("Address ")),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":i[2]||(i[2]=e=>c.value=e),id:"newAddress",type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",placeholder:"Enter your address"},null,512),[[o.Jo,c.value]])])]),(0,l.Lk)("button",{onClick:f,disabled:e.isUpdating,class:"w-full sm:w-auto bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors duration-200 disabled:opacity-75 disabled:cursor-not-allowed"},[e.isUpdating?((0,l.uX)(),(0,l.CE)("span",E,i[6]||(i[6]=[(0,l.Lk)("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[(0,l.Lk)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,l.Lk)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962\r\n        0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),(0,l.eW)(" Updating... ")]))):((0,l.uX)(),(0,l.CE)("span",U,"Update Profile"))],8,N)])])):((0,l.uX)(),(0,l.CE)("div",R,"Loading profile...")),(0,l.Lk)("div",null,[i[9]||(i[9]=(0,l.Lk)("h2",{class:"text-2xl font-bold text-gray-800 mb-6"},"Order History",-1)),0===(0,a.R1)(t).orders.length?((0,l.uX)(),(0,l.CE)("div",X,i[7]||(i[7]=[(0,l.Lk)("p",{class:"text-gray-500"},"No orders yet.",-1)]))):((0,l.uX)(),(0,l.CE)("div",A,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,a.R1)(t).orders,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow duration-300 p-6"},[(0,l.Lk)("div",P,[(0,l.Lk)("h3",_,"Order #"+(0,r.v_)(e.id),1),(0,l.Lk)("span",{class:(0,r.C4)(["px-3 py-1 rounded-full text-sm font-medium","Delivered"===e.status?"bg-green-100 text-green-700":"Pending"===e.status?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"])},(0,r.v_)(e.status),3)]),(0,l.Lk)("p",H,[i[8]||(i[8]=(0,l.eW)(" Total: ")),(0,l.Lk)("span",V,"$"+(0,r.v_)(e.totalAmount.toLocaleString()),1)])])))),128))]))])])]))}};const K=W;var J=K}}]);
//# sourceMappingURL=637.b6fddb6d.js.map
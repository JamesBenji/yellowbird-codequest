"use strict";(self["webpackChunkcodequest"]=self["webpackChunkcodequest"]||[]).push([[508],{8811:function(e,a,t){t(8992),t(4520),t(1454);var l=t(657),s=t(7617),o=t(7844),r=t(7326),u=t(7504);const c=(0,s.aU)(r.x),d=(0,o.c7)(r.x),n=(0,l.nY)("product",{state:()=>({products:[],categories:[],searchQuery:"",selectedCategory:"all",priceRange:[0,1e4]}),getters:{filteredProducts:e=>e.products.filter((a=>{const t=a.name.toLowerCase().includes(e.searchQuery.toLowerCase())||a.description.toLowerCase().includes(e.searchQuery.toLowerCase()),l="all"===e.selectedCategory||a.category===e.selectedCategory,s=a.price>=e.priceRange[0]&&a.price<=e.priceRange[1];return t&&l&&s}))},actions:{async fetchProducts(){const e=await(0,s.GG)((0,s.rJ)(c,u.d_));this.products=e.docs.map((e=>({id:e.id,...e.data()})))},async addProduct(e){await(0,s.gS)((0,s.rJ)(c,u.d_),e),await this.fetchProducts()},async updateProduct(e,a){await(0,s.mZ)((0,s.H9)(c,u.d_,e),a),await this.fetchProducts()},async deleteProduct(e){await(0,s.kd)((0,s.H9)(c,u.d_,e)),await this.fetchProducts()},async uploadImage(e){const a=(0,o.KR)(d,`products/${e.name}`),t=(0,o.bp)(a,e);return new Promise(((e,a)=>{t.on("state_changed",null,(e=>a(e)),(async()=>{const a=await(0,o.qk)(t.snapshot.ref);e(a)}))}))},async getProductCategories(){return this.categories.length<1&&await this.fetchCategories(),this.categories},async fetchCategories(){const e=await(0,s.GG)((0,s.rJ)(c,u.g_));this.categories=e.docs.map((e=>e.id))},async addCategory(e){await(0,s.gS)((0,s.rJ)(c,u.g_),{name:e}),await this.fetchCategories()},setSearchQuery(e){this.searchQuery=e},setCategory(e){this.selectedCategory=e},setPriceRange(e){this.priceRange=e}}});a.A=n},8508:function(e,a,t){t.r(a),t.d(a,{default:function(){return X}});t(4114),t(8992),t(4520);var l=t(6768),s=t(5130),o=t(144),r=t(4232),u=t(5365),c=t(8811);const d={class:"max-w-4xl mx-auto p-8 bg-gray-100 min-h-screen"},n={class:"grid gap-8"},i={class:"space-y-6"},g={class:"grid md:grid-cols-2 gap-6"},p={for:"name",class:"block"},b={for:"price",class:"block"},y={for:"description",class:"block"},v={for:"imageUrl",class:"block"},m={class:"grid md:grid-cols-2 gap-6"},f={for:"category",class:"block"},k=["value"],x={for:"stockQuantity",class:"block"},L={class:"grid md:grid-cols-2 gap-6"},h={for:"discount",class:"block"},w={class:"flex items-center gap-3 mt-1"},C={key:0,for:"discountPercentage",class:"block"},R={class:"space-y-4"},P={class:"flex justify-between items-center"},U={class:"space-y-3"},K=["onUpdate:modelValue"],_=["onClick"],A=["disabled"],J={class:"bg-white p-8 rounded-lg shadow-lg"},V={for:"newCategory"},E=["disabled"],q={class:"bg-gray-50 p-4 rounded-lg"},D={class:"flex flex-wrap gap-2"};var Q=(0,l.pM)({__name:"AdminProducts",setup(e){const a=(0,c.A)(),t=(0,u.A)(),Q=(0,o.KR)(""),N=(0,o.KR)(""),X=(0,o.KR)(0),I=(0,o.KR)(""),S=(0,o.KR)(""),G=(0,o.KR)(0),$=(0,o.KR)(!1),F=(0,o.KR)(0),H=(0,o.KR)([]),M=(0,o.KR)(""),j=(0,o.KR)(!1),Y=(0,o.KR)(!1);(0,l.sV)((()=>{t.addNotification("Loading...","success"),a.fetchProducts(),a.fetchCategories()}));const Z=()=>H.value.push(""),z=e=>H.value.splice(e,1),B=async()=>{try{j.value=!0;const e={name:Q.value,description:N.value,price:X.value,imageUrl:I.value,category:S.value,stockQuantity:G.value,stockLevel:G.value>0?"in_stock":"out_of_stock",hasDiscount:$.value,discountPercentage:$.value?F.value:0,galleryUrls:H.value.filter((e=>""!==e.trim()))};await a.addProduct(e),Q.value="",N.value="",X.value=0,I.value="",S.value="",G.value=0,$.value=!1,F.value=0,H.value=[],t.addNotification("Product added successfully!","success")}catch(e){t.addNotification("Error adding product","error")}finally{j.value=!1}},O=async()=>{try{Y.value=!0,await a.addCategory(M.value),M.value="",t.addNotification("Category added successfully!","success")}catch(e){t.addNotification("Error adding category","error")}finally{Y.value=!1}};return(e,t)=>((0,l.uX)(),(0,l.CE)("div",d,[t[23]||(t[23]=(0,l.Lk)("h1",{class:"text-3xl font-bold mb-8 text-gray-800"},"Admin Dashboard",-1)),(0,l.Lk)("div",n,[(0,l.Lk)("form",{onSubmit:(0,s.D$)(B,["prevent"]),class:"bg-white p-8 rounded-lg shadow-lg"},[t[20]||(t[20]=(0,l.Lk)("h2",{class:"text-2xl font-semibold text-gray-800 mb-6"},"Add New Product",-1)),(0,l.Lk)("div",i,[(0,l.Lk)("div",g,[(0,l.Lk)("label",p,[t[9]||(t[9]=(0,l.Lk)("span",{class:"text-gray-700 mb-2"},"Product Name *",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>Q.value=e),type:"text",required:"",class:"w-full px-4 py-2 mt-1 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[s.Jo,Q.value]])]),(0,l.Lk)("label",b,[t[10]||(t[10]=(0,l.Lk)("span",{class:"text-gray-700 mb-2"},"Price *",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>X.value=e),type:"number",step:"0.01",min:"0",required:"",class:"w-full px-4 py-2 mt-1 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[s.Jo,X.value]])])]),(0,l.Lk)("label",y,[t[11]||(t[11]=(0,l.Lk)("span",{class:"text-gray-700 mb-2"},"Description *",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>N.value=e),rows:"4",required:"",class:"w-full px-4 py-2 mt-1 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[s.Jo,N.value]])]),(0,l.Lk)("label",v,[t[12]||(t[12]=(0,l.Lk)("span",{class:"text-gray-700 mb-2"},"Main Image URL *",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>I.value=e),type:"text",required:"",class:"w-full px-4 py-2 mt-1 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[s.Jo,I.value]])]),(0,l.Lk)("div",m,[(0,l.Lk)("label",f,[t[14]||(t[14]=(0,l.Lk)("span",{class:"text-gray-700 mb-2"},"Category *",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>S.value=e),required:"",class:"w-full px-4 py-2 mt-1 border rounded-lg focus:ring-2 focus:ring-blue-500"},[t[13]||(t[13]=(0,l.Lk)("option",{value:"",disabled:""},"Select a category",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,o.R1)(a).categories,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e,value:e},(0,r.v_)(e),9,k)))),128))],512),[[s.u1,S.value]])]),(0,l.Lk)("label",x,[t[15]||(t[15]=(0,l.Lk)("span",{class:"text-gray-700 mb-2"},"Stock Quantity *",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>G.value=e),type:"number",min:"0",required:"",class:"w-full px-4 py-2 mt-1 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[s.Jo,G.value,void 0,{number:!0}]])])]),(0,l.Lk)("div",L,[(0,l.Lk)("label",h,[t[17]||(t[17]=(0,l.Lk)("span",{class:"text-gray-700 mb-2"},"Discount",-1)),(0,l.Lk)("div",w,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>$.value=e),type:"checkbox",class:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"},null,512),[[s.lH,$.value]]),t[16]||(t[16]=(0,l.Lk)("span",null,"Apply Discount",-1))])]),$.value?((0,l.uX)(),(0,l.CE)("label",C,[t[18]||(t[18]=(0,l.Lk)("span",{class:"text-gray-700 mb-2"},"Discount Percentage",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>F.value=e),type:"number",min:"0",max:"100",class:"w-full px-4 py-2 mt-1 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[s.Jo,F.value,void 0,{number:!0}]])])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",R,[(0,l.Lk)("div",P,[t[19]||(t[19]=(0,l.Lk)("h3",{class:"text-lg font-medium text-gray-800"},"Gallery Images",-1)),(0,l.Lk)("button",{onClick:(0,s.D$)(Z,["prevent"]),type:"button",class:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600"}," Add Image URL ")]),(0,l.Lk)("div",U,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(H.value,((e,a)=>((0,l.uX)(),(0,l.CE)("label",{for:"galleryUrls",key:a,class:"flex gap-3"},[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e=>H.value[a]=e,type:"text",class:"flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,8,K),[[s.Jo,H.value[a]]]),(0,l.Lk)("button",{onClick:(0,s.D$)((e=>z(a)),["prevent"]),type:"button",class:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600"}," Remove ",8,_)])))),128))])]),(0,l.Lk)("button",{type:"submit",disabled:j.value,class:"w-full py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},(0,r.v_)(j.value?"Adding...":"Add Product"),9,A)])],32),(0,l.Lk)("div",J,[t[22]||(t[22]=(0,l.Lk)("h2",{class:"text-2xl font-semibold text-gray-800 mb-6"},"Categories",-1)),(0,l.Lk)("form",{onSubmit:(0,s.D$)(O,["prevent"]),class:"flex gap-4 mb-6"},[(0,l.Lk)("label",V,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>M.value=e),type:"text",required:"",placeholder:"New category name",class:"flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[s.Jo,M.value]])]),(0,l.Lk)("button",{type:"submit",disabled:!M.value||Y.value,class:"px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed"},(0,r.v_)(Y.value?"Adding...":"Add"),9,E)],32),(0,l.Lk)("div",q,[t[21]||(t[21]=(0,l.Lk)("h3",{class:"font-medium text-gray-700 mb-3"},"Existing Categories",-1)),(0,l.Lk)("div",D,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,o.R1)(a).categories,(e=>((0,l.uX)(),(0,l.CE)("span",{key:e,class:"px-3 py-1 bg-gray-200 rounded-full text-sm"},(0,r.v_)(e),1)))),128))])])])])]))}});const N=Q;var X=N}}]);
//# sourceMappingURL=508.4bd998ef.js.map
{"version":3,"file":"js/781.8f82cffc.js","mappings":"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","sources":["webpack://codequest/./src/stores/product.ts","webpack://codequest/./src/views/ProductDetails.vue","webpack://codequest/./src/views/ProductDetails.vue?4b31"],"sourcesContent":["/* eslint-disable linebreak-style */\r\n/* eslint-disable max-len */\r\nimport { defineStore } from 'pinia';\r\nimport {\r\n  getFirestore,\r\n  collection,\r\n  getDocs,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  doc,\r\n} from 'firebase/firestore';\r\nimport {\r\n  getStorage,\r\n  ref,\r\n  uploadBytesResumable,\r\n  getDownloadURL,\r\n} from 'firebase/storage';\r\nimport { firebaseApp } from '@/plugins/vuefire';\r\nimport { Product } from '@/types';\r\nimport { CATEGORIES_COLLECTION, PRODUCT_COLLECTION } from '@/config';\r\n\r\nconst db = getFirestore(firebaseApp);\r\nconst storage = getStorage(firebaseApp);\r\n\r\nconst useProductStore = defineStore('product', {\r\n  state: () => ({\r\n    products: [] as Product[],\r\n    categories: [] as string[],\r\n    searchQuery: '',\r\n    selectedCategory: 'all',\r\n    priceRange: [0, 10000],\r\n  }),\r\n\r\n  getters: {\r\n    filteredProducts: (state) => state.products.filter((product) => {\r\n      const matchesSearch = product.name.toLowerCase().includes(state.searchQuery.toLowerCase())\r\n          || product.description.toLowerCase().includes(state.searchQuery.toLowerCase());\r\n\r\n      const matchesCategory = state.selectedCategory === 'all' || product.category === state.selectedCategory;\r\n\r\n      const matchesPrice = product.price >= state.priceRange[0] && product.price <= state.priceRange[1];\r\n\r\n      return matchesSearch && matchesCategory && matchesPrice;\r\n    }),\r\n  },\r\n\r\n  actions: {\r\n    async fetchProducts() {\r\n      const querySnapshot = await getDocs(collection(db, PRODUCT_COLLECTION));\r\n      this.products = querySnapshot.docs.map((document) => ({ id: document.id, ...document.data() } as Product));\r\n    },\r\n\r\n    async addProduct(product: Omit<Product, 'id'>) {\r\n      await addDoc(collection(db, PRODUCT_COLLECTION), product);\r\n      await this.fetchProducts(); // Refresh list\r\n    },\r\n\r\n    async updateProduct(id: string, updatedProduct: Partial<Product>) {\r\n      await updateDoc(doc(db, PRODUCT_COLLECTION, id), updatedProduct);\r\n      await this.fetchProducts();\r\n    },\r\n\r\n    async deleteProduct(id: string) {\r\n      await deleteDoc(doc(db, PRODUCT_COLLECTION, id));\r\n      await this.fetchProducts();\r\n    },\r\n\r\n    async uploadImage(file: File): Promise<string> {\r\n      const storageRef = ref(storage, `products/${file.name}`);\r\n      const uploadTask = uploadBytesResumable(storageRef, file);\r\n\r\n      return new Promise((resolve, reject) => {\r\n        uploadTask.on(\r\n          'state_changed',\r\n          null,\r\n          (error) => reject(error),\r\n          async () => {\r\n            const downloadURL = await getDownloadURL(uploadTask.snapshot.ref);\r\n            resolve(downloadURL);\r\n          },\r\n        );\r\n      });\r\n    },\r\n\r\n    async getProductCategories() {\r\n      if (this.categories.length < 1) await this.fetchCategories();\r\n      return this.categories;\r\n    },\r\n\r\n    async fetchCategories() {\r\n      const querySnapshot = await getDocs(collection(db, CATEGORIES_COLLECTION));\r\n      this.categories = querySnapshot.docs.map((d) => d.id);\r\n    },\r\n\r\n    async addCategory(name: string) {\r\n      await addDoc(collection(db, CATEGORIES_COLLECTION), { name });\r\n      await this.fetchCategories();\r\n    },\r\n\r\n    setSearchQuery(query: string) {\r\n      this.searchQuery = query;\r\n    },\r\n\r\n    setCategory(category: string) {\r\n      this.selectedCategory = category;\r\n    },\r\n\r\n    setPriceRange(range: [number, number]) {\r\n      this.priceRange = range;\r\n    },\r\n  },\r\n});\r\n\r\nexport default useProductStore;\r\n","<!-- eslint-disable linebreak-style -->\r\n<script setup>\r\nimport { onMounted, computed } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nimport { PLATFORM_CURRENCY } from '@/config';\r\nimport useProductStore from '../stores/product';\r\nimport useAuthStore from '../stores/auth';\r\nimport useCartStore from '../stores/cart';\r\n\r\nconst route = useRoute();\r\nconst productStore = useProductStore();\r\nconst authStore = useAuthStore();\r\nconst cartStore = useCartStore();\r\n\r\nconst product = computed(() => productStore.products.find((p) => p.id === route.params.id));\r\n\r\nonMounted(() => {\r\n  productStore.fetchProducts();\r\n});\r\n\r\nconst addToCart = () => {\r\n  if (product.value) {\r\n    cartStore.addToCart({\r\n      id: product.value.id,\r\n      name: product.value.name,\r\n      price: product.value.price,\r\n      quantity: 1,\r\n    });\r\n  }\r\n};\r\n</script>\r\n<!-- eslint-disable linebreak-style -->\r\n\r\n<!-- <template>\r\n  <div class=\"p-6\" v-if=\"product\">\r\n    <h1 class=\"text-2xl font-bold mb-4\">{{ product.name }}</h1>\r\n    <img :src=\"product.imageUrl\" :alt=\"product.name + 'image'\"\r\n    class=\"w-full h-96 object-cover rounded mb-4\" />\r\n\r\n    <h2 class=\"text-lg font-semibold\">Description</h2>\r\n    <p class=\"mb-4\">{{ product.description }}</p>\r\n\r\n    <h2 class=\"text-lg font-semibold\">Gallery</h2>\r\n    <div class=\"grid grid-cols-3 gap-4\">\r\n      <img v-for=\"url in product.galleryUrls\" :key=\"url\" :src=\"url\"\r\n      :alt=\"product.name + 'image'\" class=\"w-full h-40 object-cover rounded\" />\r\n    </div>\r\n\r\n    <h2 class=\"text-lg font-semibold mt-4\">Price</h2>\r\n    <p class=\"font-bold text-green-600\"> {{ PLATFORM_CURRENCY }} {{ product.price }}</p>\r\n\r\n    <div v-if=\"authStore.user?.role === 'admin'\" class=\"mt-6\">\r\n      <h2 class=\"text-lg font-semibold\">Admin Options</h2>\r\n      <button class=\"bg-yellow-500 text-white p-2 rounded mt-2\">Edit Product</button>\r\n      <button class=\"bg-red-500 text-white p-2 rounded mt-2 ml-2\">Delete Product</button>\r\n    </div>\r\n\r\n    <button v-else @click=\"addToCart\" class=\"bg-blue-500 text-white p-2 rounded mt-4\">\r\n        Add to Cart\r\n    </button>\r\n  </div>\r\n</template> -->\r\n\r\n<template>\r\n    <div class=\"p-6 max-w-7xl mx-auto\" v-if=\"product\">\r\n      <div class=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n        <!-- Image Section -->\r\n        <div class=\"flex flex-col items-center\">\r\n          <img :src=\"product.imageUrl\" :alt=\"product.name + 'image'\"\r\n               class=\"w-full max-w-lg h-auto object-contain\r\n               rounded-lg shadow-lg mb-4 transition-transform duration-300 hover:scale-105\" />\r\n\r\n        </div>\r\n\r\n        <!-- Details Section -->\r\n        <div class=\"space-y-6\">\r\n          <h1 class=\"font-bold text-gray-900 cursive-non-selectable text-6xl\">\r\n            {{ product.name }}</h1>\r\n\r\n          <div class=\"prose max-w-none\">\r\n            <!-- <h2 class=\"text-2xl font-semibold text-gray-800 mb-2 cursive-non-selectable\">\r\n                Description</h2> -->\r\n            <p class=\"text-gray-600 leading-relaxed\">{{ product.description }}</p>\r\n          </div>\r\n\r\n          <div v-if=\"product.galleryUrls\"\r\n            class=\"prose max-w-none\">\r\n            <h2 class=\"text-xl font-semibold text-gray-800 mb-2\">Gallery</h2>\r\n            <div class=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\r\n              <img v-for=\"url in product.galleryUrls\" :key=\"url\" :src=\"url\"\r\n                   :alt=\"product.name + 'image'\"\r\n                   class=\"w-full h-32 md:h-40 object-cover rounded-lg\r\n                   border hover:shadow-lg transition-all duration-300 cursor-pointer\" />\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"w-full max-w-lg\">\r\n            <h2 class=\"text-2xl font-bold text-gray-800 mb-2\">\r\n                {{ PLATFORM_CURRENCY }} {{ product.price.toLocaleString() }}\r\n            </h2>\r\n\r\n            <div v-if=\"authStore.user?.role === 'admin'\"\r\n            class=\"mt-4 space-y-2 flex justify-between\">\r\n              <button class=\"admin-btn bg-yellow-500 hover:bg-yellow-600\">\r\n                Edit Product\r\n              </button>\r\n              <button class=\"admin-btn bg-red-500 hover:bg-red-600 ml-0 md:ml-2\">\r\n                Delete Product\r\n              </button>\r\n            </div>\r\n\r\n            <button v-else @click=\"addToCart\"\r\n                    class=\"w-full bg-gray-800 hover:bg-gray-600 my-2\r\n                    text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-300\">\r\n              Add to Cart\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n<!-- eslint-disable linebreak-style -->\r\n\r\n<style scoped>\r\n.admin-btn {\r\n  @apply w-full md:w-auto text-white font-semibold py-2 px-4\r\n  rounded-lg transition-colors duration-300;\r\n}\r\n\r\n@media (min-width: 768px) {\r\n  .admin-btn {\r\n    width: auto;\r\n  }\r\n}\r\n\r\n.cursive-non-selectable {\r\n  font-family: 'Tangerine', cursive;\r\n  user-select: none;\r\n  font-weight: bold;\r\n}\r\n</style>\r\n","import script from \"./ProductDetails.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ProductDetails.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ProductDetails.vue?vue&type=style&index=0&id=4f49ffba&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4f49ffba\"]])\n\nexport default __exports__"],"names":["db","getFirestore","firebaseApp","storage","getStorage","useProductStore","defineStore","state","products","categories","searchQuery","selectedCategory","priceRange","getters","filteredProducts","filter","product","matchesSearch","name","toLowerCase","includes","description","matchesCategory","category","matchesPrice","price","actions","fetchProducts","querySnapshot","getDocs","collection","PRODUCT_COLLECTION","this","docs","map","document","id","data","addProduct","addDoc","updateProduct","updatedProduct","updateDoc","doc","deleteProduct","deleteDoc","uploadImage","file","storageRef","ref","uploadTask","uploadBytesResumable","Promise","resolve","reject","on","error","async","downloadURL","getDownloadURL","snapshot","getProductCategories","length","fetchCategories","CATEGORIES_COLLECTION","d","addCategory","setSearchQuery","query","setCategory","setPriceRange","range","route","useRoute","productStore","authStore","useAuthStore","cartStore","useCartStore","computed","find","p","params","onMounted","addToCart","value","quantity","__exports__"],"sourceRoot":""}
"use strict";(self["webpackChunkcodequest"]=self["webpackChunkcodequest"]||[]).push([[128],{8811:function(t,e,a){a(8992),a(4520),a(1454);var s=a(657),r=a(7617),o=a(7844),c=a(7326),i=a(7504);const n=(0,r.aU)(c.x),l=(0,o.c7)(c.x),u=(0,s.nY)("product",{state:()=>({products:[],categories:[],searchQuery:"",selectedCategory:"all",priceRange:[0,1e4]}),getters:{filteredProducts:t=>t.products.filter((e=>{const a=e.name.toLowerCase().includes(t.searchQuery.toLowerCase())||e.description.toLowerCase().includes(t.searchQuery.toLowerCase()),s="all"===t.selectedCategory||e.category===t.selectedCategory,r=e.price>=t.priceRange[0]&&e.price<=t.priceRange[1];return a&&s&&r}))},actions:{async fetchProducts(){const t=await(0,r.GG)((0,r.rJ)(n,i.d_));this.products=t.docs.map((t=>({id:t.id,...t.data()})))},async addProduct(t){await(0,r.gS)((0,r.rJ)(n,i.d_),t),await this.fetchProducts()},async updateProduct(t,e){await(0,r.mZ)((0,r.H9)(n,i.d_,t),e),await this.fetchProducts()},async deleteProduct(t){await(0,r.kd)((0,r.H9)(n,i.d_,t)),await this.fetchProducts()},async uploadImage(t){const e=(0,o.KR)(l,`products/${t.name}`),a=(0,o.bp)(e,t);return new Promise(((t,e)=>{a.on("state_changed",null,(t=>e(t)),(async()=>{const e=await(0,o.qk)(a.snapshot.ref);t(e)}))}))},async getProductCategories(){return this.categories.length<1&&await this.fetchCategories(),this.categories},async fetchCategories(){const t=await(0,r.GG)((0,r.rJ)(n,i.g_));this.categories=t.docs.map((t=>t.id))},async addCategory(t){await(0,r.gS)((0,r.rJ)(n,i.g_),{name:t}),await this.fetchCategories()},setSearchQuery(t){this.searchQuery=t},setCategory(t){this.selectedCategory=t},setPriceRange(t){this.priceRange=t}}});e.A=u},8128:function(t,e,a){a.r(e),a.d(e,{default:function(){return S}});a(4114),a(8992),a(4520),a(2577),a(7550);var s=a(6768),r=a(144),o=a(4232),c=a(1387),i=a(7504),n=a(5365),l=a(8811),u=a(6380),d=a(5108);const g={class:"p-6"},h={class:"relative max-w-full mb-6"},y={class:"flex space-x-4 overflow-x-auto whitespace-nowrap pb-2 custom-scrollbar"},p={key:1,class:"flex-shrink-0"},m=["onClick"],f={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"},k=["src","alt"],C={class:"text-lg font-semibold text-gray-800"},v={class:"text-gray-600 text-sm mb-2 custom-text-ellipsis"},w={key:0,class:"font-normal text-sm"},b={class:"flex items-center space-x-2"},x={key:0,class:"text-gray-400 line-through text-sm"},L={class:"mt-4"},_={key:0},R=["onClick"],P={key:1,class:"flex items-center justify-between"},E=["onClick"],X={class:"text-gray-800 font-semibold"},Q=["onClick"];var q={__name:"StorePage",setup(t){const e=(0,l.A)(),a=(0,u.A)(),q=(0,d.A)(),I=(0,c.lq)(),A=(0,c.rd)(),S=(0,n.A)(),D=(0,r.KR)(I.query.category||"");(0,s.sV)((async()=>{S.addNotification("Loading...","success"),await e.fetchCategories(),await e.fetchProducts()}));const j=(0,s.EW)((()=>D.value?e.products.filter((t=>t.category===D.value)):e.products)),F=t=>{D.value=t,A.push({path:"/store",query:{category:t}})},G=t=>{a.user?q.addToCart({id:t.name,name:t.name,price:t.price,quantity:1}):A.push("/login")};return(t,c)=>{const n=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",g,[c[2]||(c[2]=(0,s.Lk)("h1",{class:"text-3xl font-bold mb-6 text-gray-800"},"Explore Our Furniture Collection",-1)),(0,s.Lk)("div",h,[c[1]||(c[1]=(0,s.Lk)("div",{class:"absolute right-0 top-0 bottom-0 w-12 bg-gradient-to-l from-white pointer-events-none"},null,-1)),(0,s.Lk)("div",y,[(0,r.R1)(e).categories.length>0?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:c[0]||(c[0]=t=>F("")),class:(0,o.C4)(["p-2 rounded flex-shrink-0 transition-colors duration-300",""===D.value?"bg-gray-800 text-white":"bg-gray-200 hover:bg-gray-300"])}," All ",2)):(0,s.Q3)("",!0),(0,r.R1)(e).categories.length<1?((0,s.uX)(),(0,s.CE)("p",p," Loading categories ...")):((0,s.uX)(!0),(0,s.CE)(s.FK,{key:2},(0,s.pI)((0,r.R1)(e).categories,(t=>((0,s.uX)(),(0,s.CE)("button",{key:t,onClick:e=>F(t),class:(0,o.C4)(["p-2 rounded flex-shrink-0 transition-colors duration-300",D.value===t?"bg-gray-800 text-white":"bg-gray-200 hover:bg-gray-300"])},(0,o.v_)(t),11,m)))),128))])]),(0,s.Lk)("div",f,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(j.value,(t=>((0,s.uX)(),(0,s.CE)("div",{key:t.id,class:"group border p-4 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 bg-white"},[(0,s.bF)(n,{to:`/product/${t.id}`},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:t.imageUrl,alt:t.name+"image",class:"w-full h-48 object-cover rounded-lg mb-4 transition-transform duration-300 group-hover:scale-105"},null,8,k),(0,s.Lk)("h2",C,(0,o.v_)(t.name),1),(0,s.Lk)("p",v,(0,o.v_)(t.description),1),t.hasDiscount?((0,s.uX)(),(0,s.CE)("p",w," ðŸ“Œ"+(0,o.v_)(t.discountPercentage)+"% Discount",1)):(0,s.Q3)("",!0),(0,s.Lk)("div",b,[t.hasDiscount?((0,s.uX)(),(0,s.CE)("p",x,(0,o.v_)((0,r.R1)(i.IB))+" "+(0,o.v_)(t.price.toLocaleString()),1)):(0,s.Q3)("",!0),(0,s.Lk)("p",{class:(0,o.C4)(["font-bold",t.hasDiscount?"text-green-600":"text-gray-800"])},(0,o.v_)((0,r.R1)(i.IB))+" "+(0,o.v_)(t.hasDiscount?(t.price*(1-t.discountPercentage/100)).toLocaleString():t.price.toLocaleString()),3)])])),_:2},1032,["to"]),(0,s.Lk)("div",L,[!(0,r.R1)(q).cartItems.some((e=>e.id===t.name))||(0,r.R1)(q).cartItems.find((e=>e.id===t.name))?.quantity<1?((0,s.uX)(),(0,s.CE)("div",_,[(0,s.Lk)("button",{onClick:e=>G(t),class:"w-full bg-gray-800 text-white py-2 rounded-lg hover:bg-gray-700 transition-colors duration-300"},(0,o.v_)((0,r.R1)(a).user?"Add to Cart":"Login to Purchase"),9,R)])):((0,s.uX)(),(0,s.CE)("div",P,[(0,s.Lk)("button",{onClick:e=>(0,r.R1)(q).decreaseQuantity(t.name),class:"bg-gray-200 text-gray-800 w-8 h-8 rounded-full flex items-center justify-center hover:bg-gray-300 transition-colors duration-300"}," - ",8,E),(0,s.Lk)("span",X,(0,o.v_)((0,r.R1)(q).cartItems.find((e=>e.id===t.name))?.quantity||0),1),(0,s.Lk)("button",{onClick:e=>(0,r.R1)(q).increaseQuantity(t.name),class:"bg-gray-200 text-gray-800 w-8 h-8 rounded-full flex items-center justify-center hover:bg-gray-300 transition-colors duration-300"}," + ",8,Q)]))])])))),128))])])}}},I=a(1241);const A=(0,I.A)(q,[["__scopeId","data-v-60655807"]]);var S=A}}]);
//# sourceMappingURL=128.01218837.js.map
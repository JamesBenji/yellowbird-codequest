{"version":3,"file":"js/128.01218837.js","mappings":"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","sources":["webpack://codequest/./src/stores/product.ts","webpack://codequest/./src/views/StorePage.vue","webpack://codequest/./src/views/StorePage.vue?814e"],"sourcesContent":["/* eslint-disable linebreak-style */\r\n/* eslint-disable max-len */\r\nimport { defineStore } from 'pinia';\r\nimport {\r\n  getFirestore,\r\n  collection,\r\n  getDocs,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  doc,\r\n} from 'firebase/firestore';\r\nimport {\r\n  getStorage,\r\n  ref,\r\n  uploadBytesResumable,\r\n  getDownloadURL,\r\n} from 'firebase/storage';\r\nimport { firebaseApp } from '@/plugins/vuefire';\r\nimport { Product } from '@/types';\r\nimport { CATEGORIES_COLLECTION, PRODUCT_COLLECTION } from '@/config';\r\n\r\nconst db = getFirestore(firebaseApp);\r\nconst storage = getStorage(firebaseApp);\r\n\r\nconst useProductStore = defineStore('product', {\r\n  state: () => ({\r\n    products: [] as Product[],\r\n    categories: [] as string[],\r\n    searchQuery: '',\r\n    selectedCategory: 'all',\r\n    priceRange: [0, 10000],\r\n  }),\r\n\r\n  getters: {\r\n    filteredProducts: (state) => state.products.filter((product) => {\r\n      const matchesSearch = product.name.toLowerCase().includes(state.searchQuery.toLowerCase())\r\n          || product.description.toLowerCase().includes(state.searchQuery.toLowerCase());\r\n\r\n      const matchesCategory = state.selectedCategory === 'all' || product.category === state.selectedCategory;\r\n\r\n      const matchesPrice = product.price >= state.priceRange[0] && product.price <= state.priceRange[1];\r\n\r\n      return matchesSearch && matchesCategory && matchesPrice;\r\n    }),\r\n  },\r\n\r\n  actions: {\r\n    async fetchProducts() {\r\n      const querySnapshot = await getDocs(collection(db, PRODUCT_COLLECTION));\r\n      this.products = querySnapshot.docs.map((document) => ({ id: document.id, ...document.data() } as Product));\r\n    },\r\n\r\n    async addProduct(product: Omit<Product, 'id'>) {\r\n      await addDoc(collection(db, PRODUCT_COLLECTION), product);\r\n      await this.fetchProducts(); // Refresh list\r\n    },\r\n\r\n    async updateProduct(id: string, updatedProduct: Partial<Product>) {\r\n      await updateDoc(doc(db, PRODUCT_COLLECTION, id), updatedProduct);\r\n      await this.fetchProducts();\r\n    },\r\n\r\n    async deleteProduct(id: string) {\r\n      await deleteDoc(doc(db, PRODUCT_COLLECTION, id));\r\n      await this.fetchProducts();\r\n    },\r\n\r\n    async uploadImage(file: File): Promise<string> {\r\n      const storageRef = ref(storage, `products/${file.name}`);\r\n      const uploadTask = uploadBytesResumable(storageRef, file);\r\n\r\n      return new Promise((resolve, reject) => {\r\n        uploadTask.on(\r\n          'state_changed',\r\n          null,\r\n          (error) => reject(error),\r\n          async () => {\r\n            const downloadURL = await getDownloadURL(uploadTask.snapshot.ref);\r\n            resolve(downloadURL);\r\n          },\r\n        );\r\n      });\r\n    },\r\n\r\n    async getProductCategories() {\r\n      if (this.categories.length < 1) await this.fetchCategories();\r\n      return this.categories;\r\n    },\r\n\r\n    async fetchCategories() {\r\n      const querySnapshot = await getDocs(collection(db, CATEGORIES_COLLECTION));\r\n      this.categories = querySnapshot.docs.map((d) => d.id);\r\n    },\r\n\r\n    async addCategory(name: string) {\r\n      await addDoc(collection(db, CATEGORIES_COLLECTION), { name });\r\n      await this.fetchCategories();\r\n    },\r\n\r\n    setSearchQuery(query: string) {\r\n      this.searchQuery = query;\r\n    },\r\n\r\n    setCategory(category: string) {\r\n      this.selectedCategory = category;\r\n    },\r\n\r\n    setPriceRange(range: [number, number]) {\r\n      this.priceRange = range;\r\n    },\r\n  },\r\n});\r\n\r\nexport default useProductStore;\r\n","<!-- eslint-disable linebreak-style -->\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue';\r\nimport { useRoute, useRouter } from 'vue-router';\r\nimport { PLATFORM_CURRENCY } from '@/config';\r\nimport useNotificationStore from '@/stores/notification';\r\nimport useProductStore from '../stores/product';\r\nimport useAuthStore from '../stores/auth';\r\nimport useCartStore from '../stores/cart';\r\n\r\nconst productStore = useProductStore();\r\nconst authStore = useAuthStore();\r\nconst cartStore = useCartStore();\r\nconst route = useRoute();\r\nconst router = useRouter();\r\nconst notificationStore = useNotificationStore();\r\n\r\nconst selectedCategory = ref(route.query.category || '');\r\n\r\nonMounted(async () => {\r\n  // productCategories.value = await productStore.getProductCategories();\r\n  notificationStore.addNotification('Loading...', 'success');\r\n  await productStore.fetchCategories();\r\n  await productStore.fetchProducts();\r\n});\r\n\r\nconst filteredProducts = computed(() => {\r\n  if (!selectedCategory.value) return productStore.products;\r\n  return productStore.products.filter((product) => product.category === selectedCategory.value);\r\n});\r\n\r\nconst filterByCategory = (category) => {\r\n  selectedCategory.value = category;\r\n  router.push({ path: '/store', query: { category } });\r\n};\r\n\r\nconst addToCart = (product) => {\r\n  if (!authStore.user) {\r\n    router.push('/login');\r\n  } else {\r\n    cartStore.addToCart({\r\n      id: product.name,\r\n      name: product.name,\r\n      price: product.price,\r\n      quantity: 1,\r\n    });\r\n  }\r\n};\r\n</script>\r\n<!-- eslint-disable linebreak-style -->\r\n<template>\r\n  <div class=\"p-6\">\r\n    <h1 class=\"text-3xl font-bold mb-6 text-gray-800\">Explore Our Furniture Collection</h1>\r\n\r\n    <!-- Category Filters -->\r\n    <div class=\"relative max-w-full mb-6\">\r\n      <div class=\"absolute right-0 top-0 bottom-0 w-12 bg-gradient-to-l\r\n      from-white pointer-events-none\"></div>\r\n      <div class=\"flex space-x-4 overflow-x-auto whitespace-nowrap pb-2 custom-scrollbar\">\r\n        <button\r\n          v-if=\"productStore.categories.length > 0\"\r\n          @click=\"filterByCategory('')\"\r\n          :class=\"['p-2 rounded flex-shrink-0 transition-colors duration-300',\r\n          selectedCategory === '' ? 'bg-gray-800 text-white' : 'bg-gray-200 hover:bg-gray-300']\"\r\n        >\r\n          All\r\n        </button>\r\n        <p v-if=\"productStore.categories.length < 1\" class=\"flex-shrink-0\">\r\n          Loading categories ...</p>\r\n        <button\r\n          v-else\r\n          v-for=\"category in productStore.categories\"\r\n          :key=\"category\"\r\n          @click=\"filterByCategory(category)\"\r\n          :class=\"['p-2 rounded flex-shrink-0 transition-colors duration-300',\r\n          selectedCategory === category ?\r\n          'bg-gray-800 text-white' : 'bg-gray-200 hover:bg-gray-300']\"\r\n        >\r\n          {{ category }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Product Grid -->\r\n    <div class=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\">\r\n      <div\r\n        v-for=\"product in filteredProducts\"\r\n        :key=\"product.id\"\r\n        class=\"group border p-4 rounded-lg shadow-md hover:shadow-lg\r\n        transition-shadow duration-300 bg-white\"\r\n      >\r\n        <router-link :to=\"`/product/${product.id}`\">\r\n          <img\r\n            :src=\"product.imageUrl\"\r\n            :alt=\"product.name + 'image'\"\r\n            class=\"w-full h-48 object-cover rounded-lg mb-4\r\n            transition-transform duration-300 group-hover:scale-105\"\r\n          />\r\n          <h2 class=\"text-lg font-semibold text-gray-800\">{{ product.name }}</h2>\r\n          <p class=\"text-gray-600 text-sm mb-2 custom-text-ellipsis\">\r\n            {{ product.description }}</p>\r\n\r\n          <!-- Price Display -->\r\n           <p v-if=\"product.hasDiscount\" class=\"font-normal text-sm\">\r\n            ðŸ“Œ{{ product.discountPercentage }}% Discount</p>\r\n          <div class=\"flex items-center space-x-2\">\r\n            <p\r\n              v-if=\"product.hasDiscount\"\r\n              class=\"text-gray-400 line-through text-sm\"\r\n            >\r\n              {{ PLATFORM_CURRENCY }} {{ product.price.toLocaleString() }}\r\n            </p>\r\n            <p\r\n              :class=\"['font-bold', product.hasDiscount ? 'text-green-600' : 'text-gray-800']\"\r\n            >\r\n              {{ PLATFORM_CURRENCY }}\r\n              {{\r\n                product.hasDiscount\r\n                  ? (\r\n                      product.price *\r\n                      (1 - product.discountPercentage / 100)\r\n                    ).toLocaleString()\r\n                  : product.price.toLocaleString()\r\n              }}\r\n            </p>\r\n          </div>\r\n        </router-link>\r\n\r\n        <!-- Add to Cart / Quantity Controls -->\r\n        <div class=\"mt-4\">\r\n          <div v-if=\"!cartStore.cartItems.some((item) => item.id === product.name)\r\n          || cartStore.cartItems.find((item) => item.id === product.name)?.quantity < 1\">\r\n            <button\r\n              @click=\"addToCart(product)\"\r\n              class=\"w-full bg-gray-800 text-white py-2 rounded-lg hover:bg-gray-700\r\n              transition-colors duration-300\"\r\n            >\r\n              {{ authStore.user ? \"Add to Cart\" : \"Login to Purchase\" }}\r\n            </button>\r\n          </div>\r\n          <div v-else class=\"flex items-center justify-between\">\r\n            <button\r\n              @click=\"cartStore.decreaseQuantity(product.name)\"\r\n              class=\"bg-gray-200 text-gray-800 w-8 h-8 rounded-full flex items-center\r\n              justify-center hover:bg-gray-300 transition-colors duration-300\"\r\n            >\r\n              -\r\n            </button>\r\n            <span class=\"text-gray-800 font-semibold\">\r\n              {{ cartStore.cartItems.find((item) => item.id === product.name)?.quantity || 0 }}\r\n            </span>\r\n            <button\r\n              @click=\"cartStore.increaseQuantity(product.name)\"\r\n              class=\"bg-gray-200 text-gray-800 w-8 h-8 rounded-full flex items-center\r\n              justify-center hover:bg-gray-300 transition-colors duration-300\"\r\n            >\r\n              +\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<!-- eslint-disable linebreak-style -->\r\n\r\n<style scoped>\r\n.custom-scrollbar {\r\n  scrollbar-width: thin;\r\n  &::-webkit-scrollbar {\r\n    height: 4px;\r\n  }\r\n  &::-webkit-scrollbar-track {\r\n    background: transparent;\r\n  }\r\n  &::-webkit-scrollbar-thumb {\r\n    border-radius: 2px;\r\n    background: linear-gradient(to right, #4f46e5, #818cf8);\r\n  }\r\n  &::-webkit-scrollbar-thumb:hover {\r\n    background: linear-gradient(to right, #4338ca, #6366f1);\r\n  }\r\n}\r\n\r\n.custom-text-ellipsis {\r\n display: -webkit-box;\r\n -webkit-line-clamp: 2;\r\n line-clamp: 2;\r\n -webkit-box-orient: vertical;\r\n overflow: hidden;\r\n}\r\n</style>\r\n","import script from \"./StorePage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./StorePage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./StorePage.vue?vue&type=style&index=0&id=60655807&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-60655807\"]])\n\nexport default __exports__"],"names":["db","getFirestore","firebaseApp","storage","getStorage","useProductStore","defineStore","state","products","categories","searchQuery","selectedCategory","priceRange","getters","filteredProducts","filter","product","matchesSearch","name","toLowerCase","includes","description","matchesCategory","category","matchesPrice","price","actions","fetchProducts","querySnapshot","getDocs","collection","PRODUCT_COLLECTION","this","docs","map","document","id","data","addProduct","addDoc","updateProduct","updatedProduct","updateDoc","doc","deleteProduct","deleteDoc","uploadImage","file","storageRef","ref","uploadTask","uploadBytesResumable","Promise","resolve","reject","on","error","async","downloadURL","getDownloadURL","snapshot","getProductCategories","length","fetchCategories","CATEGORIES_COLLECTION","d","addCategory","setSearchQuery","query","setCategory","setPriceRange","range","productStore","authStore","useAuthStore","cartStore","useCartStore","route","useRoute","router","useRouter","notificationStore","useNotificationStore","onMounted","addNotification","computed","value","filterByCategory","push","path","addToCart","user","quantity","__exports__"],"sourceRoot":""}